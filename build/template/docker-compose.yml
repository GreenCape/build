apache:
  image: php:5.6-apache
  volumes:
    - ${server-dockyard}/apache/conf:/etc/apache2/sites-enabled
    - ${server-dockyard}/apache/html:/var/www/html
  ports:
    - "8080:8080"
  environment:
    DISTFILES: $DISTFILES
  links:
    - mysql
    - pgsql

nginx:
  image: nginx
  volumes:
    - ${server-dockyard}/nginx/conf:/etc/nginx/conf.d
    - ${server-dockyard}/nginx/html:/var/www/html
  ports:
    - "80:80"
  environment:
    DISTFILES: $DISTFILES
  links:
    - mysql
    - pgsql
    - php

php:
  image: php:5.6-fpm
  ports:
    - "9000:9000"

mysql:
  build: ${build}/docker/mariadb
  volumes:
    - ${server-dockyard}/mysql:/import.d
  environment:
    MYSQL_DATABASE: ${database.mysql.name}
    MYSQL_ROOT_PASSWORD: ${database.mysql.rootPassword}
    MYSQL_USER: ${database.mysql.user}
    MYSQL_PASSWORD: ${database.mysql.password}

pgsql:
  image: postgres:${database.postgresql.version}
  volumes:
    - ${server-dockyard}/postgresql:/docker-entrypoint-initdb.d
  environment:
    POSTGRES_DB: ${database.postgresql.name}
    POSTGRES_USER: ${database.postgresql.user}
    POSTGRES_PASSWORD: ${database.postgresql.password}
